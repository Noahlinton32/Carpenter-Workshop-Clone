{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Noah Linton/Documents/repos/carpenterServer/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Noah Linton/Documents/repos/carpenterServer/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Noah Linton/Documents/repos/carpenterServer/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/Users/Noah Linton/Documents/repos/carpenterServer/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{useState,useEffect}from\"react\";import axios from\"axios\";import{NavLink}from\"../components/Navbar/NavbarElements\";import'bootstrap/dist/css/bootstrap.min.css';import{Button}from\"react-bootstrap\";import styled,{createGlobalStyle,css}from'styled-components';import{MDBDataTable}from'mdbreact';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GlobalStyle=createGlobalStyle(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  html{\\n    height: 100%;\\n\\n  }\\n\\n  body{\\n    font-family: Arial, Helvetica, sans-serif;\\n    background: linear-gradient(to top, #d1913c, #ffd194);\\n    background-attachment: fixed;\\n    height: 100%;\\n    margin: 0;\\n    color: 555;\\n  }\\n\"])));function Incidents(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),incidents=_useState2[0],setIncidents=_useState2[1];useEffect(function(){getIncidents();},[]);var getIncidents=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('http://localhost:3000/incidents');case 2:res=_context.sent;setIncidents(res.data.incidents);case 4:case\"end\":return _context.stop();}},_callee);}));return function getIncidents(){return _ref.apply(this,arguments);};}();var deleteIncident=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"http://localhost:3000/incidents/\".concat(id));case 3:setIncidents(incidents.filter(function(incident){return incident._id!==id;}));_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.error(\"Error deleting incident:\",_context2.t0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function deleteIncident(_x){return _ref2.apply(this,arguments);};}();var _loop=function _loop(i){incidents[i]['edit']=/*#__PURE__*/_jsx(NavLink,{to:\"/incidents/edit/\".concat(incidents[i]['_id']),children:/*#__PURE__*/_jsx(Button,{style:{backgroundColor:'lightblue',border:'0'},children:\"Edit\"})});incidents[i]['delete']=/*#__PURE__*/_jsx(Button,{style:{backgroundColor:'darkred',border:'0'},onClick:function onClick(){return deleteIncident(incidents[i]['_id']);},children:\" Delete \"});incidents[i]['date']=incidents[i]['date'].split('T')[0];incidents[i]['participant']=incidents[i]['firstNameParticipant']+' '+incidents[i]['lastNameParticipant'];incidents[i]['reporter']=incidents[i]['firstNameReport']+' '+incidents[i]['lastNameReport'];incidents[i]['manager']=incidents[i]['firstNameManager']+' '+incidents[i]['lastNameManager'];};for(var i in incidents){_loop(i);}var data={columns:[{label:'Incident Report No.',field:'incidentReportNumber',sort:'asc',width:100},{label:'Student ID',field:'studentID',sort:'asc',width:200},{label:'Agency',field:'agencyOrProgram',sort:'asc',width:100},{label:'Contact',field:'contactNumber',sort:'asc',width:200},{label:'Address',field:'address',sort:'asc',width:100},{label:'Type',field:'incidentType',sort:'asc',width:100},{label:'Date',field:'date',sort:'asc',width:150},{label:'Location',field:'location',sort:'asc',width:100},{label:'Employee',field:'employeeID',sort:'asc',width:100},{label:'Participant',field:'participant',sort:'asc',width:100},{label:'Reporter',field:'reporter',sort:'asc',width:100},{label:'Manager',field:'manager',sort:'asc',width:100},{label:'Edit',field:'edit'},{label:'Delete',field:'delete'}],rows:incidents};return/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:'auto'},children:[/*#__PURE__*/_jsx(GlobalStyle,{}),/*#__PURE__*/_jsx(\"h2\",{style:{marginLeft:'50%'},children:\"Incidents\"}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'80%',marginLeft:'10%',backgroundColor:'#fff',borderRadius:'10px',padding:'0 20px',boxShadow:'0px 0px 20px 0px rgba(0,0,0,0.2)',minWidth:'650px'},children:[/*#__PURE__*/_jsx(MDBDataTable,{striped:true,small:true,data:data,noBottomColumns:true}),/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:'20px'},children:/*#__PURE__*/_jsx(NavLink,{to:\"/incidents/create\",activeStyle:true,children:/*#__PURE__*/_jsx(Button,{children:\"Create Incident\"})})})]})]});}export default Incidents;","map":{"version":3,"names":["useState","useEffect","axios","NavLink","Button","styled","createGlobalStyle","css","MDBDataTable","jsx","_jsx","jsxs","_jsxs","GlobalStyle","_templateObject","_taggedTemplateLiteral","Incidents","_useState","_useState2","_slicedToArray","incidents","setIncidents","getIncidents","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","sent","data","stop","apply","arguments","deleteIncident","_ref2","_callee2","id","_callee2$","_context2","delete","concat","filter","incident","_id","t0","console","error","_x","_loop","i","to","children","style","backgroundColor","border","onClick","split","columns","label","field","sort","width","rows","marginLeft","borderRadius","padding","boxShadow","minWidth","striped","small","noBottomColumns","paddingBottom","activeStyle"],"sources":["C:/Users/Noah Linton/Documents/repos/carpenterServer/client/src/pages/incidents.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport {NavLink} from \"../components/Navbar/NavbarElements\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { Button } from \"react-bootstrap\";\r\nimport styled, {createGlobalStyle, css} from 'styled-components';\r\nimport { MDBDataTable } from 'mdbreact';\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  html{\r\n    height: 100%;\r\n\r\n  }\r\n\r\n  body{\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    background: linear-gradient(to top, #d1913c, #ffd194);\r\n    background-attachment: fixed;\r\n    height: 100%;\r\n    margin: 0;\r\n    color: 555;\r\n  }\r\n`\r\n\r\nfunction Incidents() {\r\n\r\n  const [incidents, setIncidents] = useState(null);\r\n\r\n  useEffect (() => {\r\n    getIncidents();\r\n  }, []);\r\n\r\n  const getIncidents = async () => {\r\n    const res = await axios.get('http://localhost:3000/incidents');\r\n    setIncidents(res.data.incidents);\r\n  };\r\n  const deleteIncident = async (id) => {\r\n    try {\r\n      await axios.delete(`http://localhost:3000/incidents/${id}`);\r\n      setIncidents(incidents.filter((incident) => incident._id !== id));\r\n    } catch (error) {\r\n      console.error(\"Error deleting incident:\", error);\r\n    }\r\n  };\r\n  for (let i in incidents){\r\n    incidents[i]['edit']=(<NavLink to={`/incidents/edit/${incidents[i]['_id']}`}><Button style={{backgroundColor: 'lightblue', border: '0'}}>Edit</Button></NavLink>)\r\n    incidents[i]['delete']= <Button\r\n    style={{backgroundColor: 'darkred', border: '0'}}\r\n    onClick={() => deleteIncident(incidents[i]['_id'])}\r\n  > Delete </Button>\r\n  incidents[i]['date']= incidents[i]['date'].split('T')[0]\r\n  incidents[i]['participant']= incidents[i]['firstNameParticipant']+' '+incidents[i]['lastNameParticipant']\r\n  incidents[i]['reporter']= incidents[i]['firstNameReport']+' '+incidents[i]['lastNameReport']\r\n  incidents[i]['manager']= incidents[i]['firstNameManager']+' '+incidents[i]['lastNameManager']  \r\n  \r\n  }\r\n  const data = {\r\n    columns: [\r\n      {\r\n        label: 'Incident Report No.',\r\n        field: 'incidentReportNumber',\r\n        sort: 'asc',\r\n        width: 100\r\n      },\r\n      {\r\n        label: 'Student ID',\r\n        field: 'studentID',\r\n        sort: 'asc',\r\n        width: 200\r\n      },\r\n      {\r\n        label: 'Agency',\r\n        field: 'agencyOrProgram',\r\n        sort: 'asc',\r\n        width: 100\r\n      },\r\n      {\r\n        label: 'Contact',\r\n        field: 'contactNumber',\r\n        sort: 'asc',\r\n        width: 200\r\n      },\r\n      {\r\n        label: 'Address',\r\n        field: 'address',\r\n        sort: 'asc',\r\n        width: 100\r\n      },\r\n      {\r\n        label: 'Type',\r\n        field: 'incidentType',\r\n        sort: 'asc',\r\n        width: 100\r\n      },\r\n      {\r\n        label: 'Date',\r\n        field: 'date',\r\n        sort: 'asc',\r\n        width: 150\r\n      },\r\n      {\r\n        label: 'Location',\r\n        field: 'location',\r\n        sort: 'asc',\r\n        width: 100\r\n      },\r\n      {\r\n        label: 'Employee',\r\n        field: 'employeeID',\r\n        sort: 'asc',\r\n        width: 100\r\n      },\r\n      {\r\n        label: 'Participant',\r\n        field: 'participant',\r\n        sort: 'asc',\r\n        width: 100\r\n      },\r\n      {\r\n        label: 'Reporter',\r\n        field: 'reporter',\r\n        sort: 'asc',\r\n        width: 100\r\n      },\r\n      {\r\n        label: 'Manager',\r\n        field: 'manager',\r\n        sort: 'asc',\r\n        width: 100\r\n      },\r\n      {\r\n        label: 'Edit',\r\n        field: 'edit',\r\n      },\r\n      {\r\n        label: 'Delete',\r\n        field: 'delete',\r\n      }\r\n    ],\r\n    rows: \r\n      incidents\r\n    }\r\n  \r\n  return <div style={{marginLeft: 'auto'}}>\r\n    <GlobalStyle/>\r\n    <h2 style={{marginLeft: '50%'}}>Incidents</h2>\r\n    <div style={{width: '80%', marginLeft:'10%', backgroundColor: '#fff',\r\n                borderRadius: '10px', padding: '0 20px',boxShadow: '0px 0px 20px 0px rgba(0,0,0,0.2)', minWidth: '650px'}}>\r\n    <MDBDataTable\r\n      striped\r\n      small\r\n      data={data}\r\n      noBottomColumns={true} \r\n    />\r\n\r\n<div style={{paddingBottom:'20px'}}>\r\n<NavLink to=\"/incidents/create\" activeStyle>\r\n    <Button>Create Incident</Button>\r\n</NavLink>\r\n</div>\r\n</div>  \r\n</div>   \r\n}\r\nexport default Incidents;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}